version: 0.2
name: "search-aggregate-post-filter-simple.yml"

metadata:
  component: "search"
setups:
  - oss-standalone
  - oss-standalone-threads-3
  - oss-standalone-threads-6
  - oss-standalone-threads-12

dbconfig:
  - init_commands:
    - '"FT.CREATE" "idx" "ON" "HASH" "SCHEMA" "numeric_field" "NUMERIC" "SORTABLE" "tag_field" "TAG" "SORTABLE" "UNF"'
    - '"HSET" "doc:1" "tag_field" "value1" "numeric_field" "10"'

clientconfig:
  benchmark_type: "read-only"
  tool: memtier_benchmark
  arguments: "--test-time 120 -c 32 -t 1 --hide-histogram --command 'FT.AGGREGATE idx '*' FILTER \"@numeric_field>1\"'"
