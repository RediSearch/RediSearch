name: temporary testing

on:
  push:
    branches-ignore: ['*'] # ignore all branches

jobs:
  test-caching:
    uses: ./.github/workflows/flow-build-artifacts.yml
    secrets: inherit

  test-caching-with-reference:
    uses: ./.github/workflows/flow-build-artifacts.yml
    secrets: inherit
    with:
      reference: ce0e14b38a57a33f3b202e7eaad96eac8b666292

  phase-2-test-caching:
    needs: test-caching
    uses: ./.github/workflows/flow-build-artifacts.yml
    secrets: inherit

  phase-2-test-caching-with-reference:
    needs: test-caching-with-reference
    uses: ./.github/workflows/flow-build-artifacts.yml
    secrets: inherit
    with:
      reference: ${{ github.sha }}
