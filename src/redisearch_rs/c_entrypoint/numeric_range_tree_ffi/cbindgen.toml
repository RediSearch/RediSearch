language = "C"
autogen_warning = "/* Warning, this file is autogenerated by cbindgen from `src/redisearch_rs/c_entrypoint/numeric_range_tree_ffi/build.rs`. Don't modify it manually. */"
cpp_compat = true
pragma_once = true
includes = ["types_rs.h", "redisearch.h", "inverted_index.h", "redismodule.h"]

# Add forward declaration for InvertedIndexNumeric (opaque type, excluded from export)
after_includes = """
/**
 * Opaque type for the Rust numeric inverted index.
 *
 * This is intentionally incompatible with the C InvertedIndex type.
 * Use accessor functions to interact with this type.
 */
typedef struct InvertedIndexNumeric InvertedIndexNumeric;
"""

[parse]
parse_deps = true
include = ["ffi", "numeric_range_tree"]

[export]
# NumericRange and NumericRangeNode are opaque types defined in the numeric_range_tree crate
# They will be forward-declared as opaque structs

# Exclude types that are already defined elsewhere or need special handling
exclude = [
    "InvertedIndexNumeric",     # Forward-declared manually
    "NumericFilter",            # Already defined in types_rs.h
    "Summary",                  # Already defined as IISummary in types_rs.h
    "IndexReader",              # Already defined in inverted_index.h
    "GcScanDelta",              # Already defined as InvertedIndexGcDelta in inverted_index.h
    "GcApplyInfo",              # Already defined as II_GCScanStats in inverted_index.h
    "InvertedIndexGCWriter",    # Already defined in inverted_index.h as II_GCWriter
    "InvertedIndexGCCallback",  # Already defined in inverted_index.h as II_GCCallback
    "IndexRepairParams",        # Already defined in inverted_index.h
    "RedisSearchCtx",           # Already defined in search_ctx.h
    "RSIndexResult",            # Already defined in types_rs.h
    "IndexBlock",               # Already defined in inverted_index.h
    "RedisModuleCtx",           # Already defined in redismodule.h
]

[export.rename]
# Ensure proper naming for C compatibility
"NumericRangeInner" = "struct NumericRange"
"NumericRangeNodeInner" = "struct NumericRangeNode"
# Map Rust Summary type to C IISummary type
"Summary" = "IISummary"
# Map Rust GC types to C types (these are already defined in inverted_index.h)
"GcScanDelta" = "InvertedIndexGcDelta"
"GcApplyInfo" = "II_GCScanStats"
# Map FFI wrapper types to C types
"InvertedIndexGCWriter" = "II_GCWriter"
"InvertedIndexGCCallback" = "II_GCCallback"
